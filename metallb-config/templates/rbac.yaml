# templates/rbac.yaml
# {{- if eq .Values.mode "tailscale" }}
# apiVersion: rbac.authorization.k8s.io/v1
# kind: Role
# metadata:
#   name: secret-reader
# rules:
#   - apiGroups: [""]
#     resources: ["secrets"]
#     verbs: ["get"]
#     resourceNames: [ {{ .Values.ipAddressPools.tailscale.secretRef.name }} ]
# ---
# apiVersion: rbac.authorization.k8s.io/v1
# kind: ClusterRoleBinding
# metadata:
#   name: metallb-secret-reader
# subjects:
#   - kind: ServiceAccount
#     name: metallb
#     namespace: {{ .Values.namespace }}
# roleRef:
#   kind: ClusterRole
#   name: secret-reader
#   apiGroup: rbac.authorization.k8s.io
# ---
# apiVersion: v1
# kind: ServiceAccount
# metadata:
#   name: metallb
#   namespace: {{ .Values.namespace }}
# {{- end}}