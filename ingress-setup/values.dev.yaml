module: ingress-setup
environment: dev
baseDomain: cquant-desktop.tailc6fb0e.ts.net
tls:
  issuer: selfsigned
  enabled: true
ingress:
  className: nginx
  annotations:
    tailscale.com/expose: "true" # Annotation officielle Tailscale pour exposer les services
    tailscale.com/serve: "true"  # Nouvelle annotation pour Tailscale serve
    tailscale.com/https: "true"  # Gestionnaire HTTPS natif de Tailscale
    tailscale.com/funnel: "true"  # Activation de Tailscale Funnel
    kubernetes.io/ingress.class: nginx  # Ajout explicite de la classe
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "false"
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$1
services:
  - path: /success/?(.*)
    pathType: Prefix
    name: success-app-dev-service
    port: 80
  - path: /trading-strategy-analysis/?(.*)
    pathType: Prefix
    name: tsa-dev-service
    port: 80
  - path: /optionviz/?(.*)
    pathType: Prefix
    name: optionsviz-dev-service
    port: 80